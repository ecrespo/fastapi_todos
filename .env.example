# Application environment
# Options: develop, staging, qa, prod
APP_ENV=develop

# System timezone used by all dockerized services (recommended)
# Example: America/Caracas
TZ=America/Caracas

# ----------------------------------------------------------------------------
# Database configuration
# Choose the engine via DB_ENGINE. Supported: sqlite, mysql, postgresql
# If DATABASE_URL is provided, it takes precedence over the granular settings.
# ----------------------------------------------------------------------------

# Primary database engine (default sqlite to preserve local/dev behavior and tests)
DB_ENGINE=sqlite

# Optional full DSN (overrides granular settings)
# Examples:
#   SQLite memory: sqlite+aiosqlite://
#   SQLite file:   sqlite+aiosqlite:///./app/shared/todos.db
#   MySQL:         mysql+aiomysql://user:password@localhost:3306/todos
#   PostgreSQL:    postgresql+asyncpg://user:password@localhost:5432/todos
#DATABASE_URL=

# Common parts used when DATABASE_URL isn't set (MySQL/PostgreSQL)
DB_HOST=localhost
# For MySQL defaults to 3306; for PostgreSQL defaults to 5432.
# You can override in your environment as needed.
DB_PORT=3306
DB_USER=root
DB_PASSWORD=secret
DB_NAME=todos

# SQLite specific (used by this project for default dev and tests)
# Directory for the sqlite database file; created if missing.
TODO_DB_DIR=./app/shared
# Filename for sqlite database, or use :memory: for in-memory DB.
TODO_DB_FILENAME=todos.db

# Notes:
# - To use MySQL, set DB_ENGINE=mysql and adjust DB_PORT=3306 (or your port), DB_USER, DB_PASSWORD, DB_NAME.
# - To use PostgreSQL, set DB_ENGINE=postgresql and set DB_PORT=5432, DB_USER, DB_PASSWORD, DB_NAME.
# - Alternatively, set a full DATABASE_URL and ignore the granular pieces above.

# ----------------------------------------------------------------------------
# Redis configuration (caching and rate limiting)
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ----------------------------------------------------------------------------
# Rate limiting (SlowAPI)
# ----------------------------------------------------------------------------
# Default limits applied to all endpoints unless overridden with @limiter.limit
# Comma-separated if you want to stack multiple windows, e.g., "100/minute, 1000/hour"
RATE_LIMIT_DEFAULTS=100/minute
# IPs exempt from rate limiting (useful for local dev/tests)
RATE_LIMIT_EXEMPT_IPS=127.0.0.1,::1
# Exact paths exempt from rate limiting (docs/openapi by default)
RATE_LIMIT_EXEMPT_PATHS=/docs,/redoc,/openapi.json,/metrics

# ----------------------------------------------------------------------------
# Celery configuration (async task processing)
# ----------------------------------------------------------------------------
# Broker URL for task queue (RabbitMQ, Redis, etc.)
# Examples:
#   RabbitMQ: pyamqp://guest@localhost//
#   Redis:    redis://localhost:6379/0
CELERY_BROKER_URL=pyamqp://guest@localhost//

# Result backend for storing task results
CELERY_RESULT_BACKEND=rpc://

# Execute tasks synchronously (useful for testing, set to true in test environments)
CELERY_TASK_ALWAYS_EAGER=false

# ----------------------------------------------------------------------------
# JWT Authentication
# ----------------------------------------------------------------------------
# Secret key for JWT token signing
# IMPORTANT: Change this to a secure random key in production!
# Generate one with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-this-to-a-secure-random-key-in-production-min-32-chars

# JWT signing algorithm (HS256 is recommended for symmetric keys)
JWT_ALGORITHM=HS256

# Access token expiration time in minutes (default: 30 minutes)
# Short-lived tokens are more secure
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# Refresh token expiration time in days (default: 30 days)
# Refresh tokens are used to obtain new access tokens without re-authentication
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ----------------------------------------------------------------------------
# CORS Configuration (Cross-Origin Resource Sharing)
# ----------------------------------------------------------------------------
# Allowed origins (comma-separated list)
# Default: local development only
# For production, set to your frontend domain(s): https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://127.0.0.1:3000,http://127.0.0.1:8000

# Allow credentials (cookies, authorization headers)
CORS_ALLOW_CREDENTIALS=true

# Allowed HTTP methods (comma-separated)
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# Allowed headers (* for all, or comma-separated list)
CORS_ALLOW_HEADERS=*

# ----------------------------------------------------------------------------
# Observability (Prometheus + Grafana)
# ----------------------------------------------------------------------------
# Prometheus UI port on host
PROMETHEUS_PORT=9090
# Grafana web UI port on host
GRAFANA_PORT=3000
# Optional: Traefik dashboard port on host
TRAEFIK_DASHBOARD_PORT=8099
# Grafana admin credentials (change in production!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
# Enable debug mode (verbose logging, detailed error messages)
# WARNING: Set to false in production!
DEBUG=false
